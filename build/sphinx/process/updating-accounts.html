
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Updating accounts &#8212; diamond-accounting 0.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="installation" href="../installation.html" />
    <link rel="prev" title="diamond-accounting" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="updating-accounts">
<h1>Updating accounts<a class="headerlink" href="#updating-accounts" title="Permalink to this headline">¶</a></h1>
<p>As long as account transactions can be downloaded in Quicken format, it is possible to import them into a plaintext ledger.
The purpose of updating the accounts is to download any transactions that occurred during the previous month, then import all those transactions into the ledger.</p>
<div class="section" id="overview-of-update-process">
<h2>Overview of update process<a class="headerlink" href="#overview-of-update-process" title="Permalink to this headline">¶</a></h2>
<p>This update process is:</p>
<ol class="arabic simple" start="0">
<li>Setup the ledger project environment.</li>
<li><a class="reference external" href="downloading.md">Download</a> monthly transactions from bank websites.</li>
<li>Sync those transactions into <cite>inbox.ledger</cite> with <cite>make sync</cite>.</li>
<li>[Process transactions](#process-inbox) in inbox.</li>
<li>[Next steps](#next-steps).</li>
</ol>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Setup the ledger project environment.
This ensures the right software is open, the right files are open, and things are going to be ready for work.</p>
<ol class="arabic simple">
<li>Open password manager software.</li>
<li>Enter the ledger project with <cite>project-workon ledger</cite></li>
<li>Load <cite>ledgers/inbox.ledger</cite> and <cite>ledgers/budget.ledger</cite> in editor.</li>
<li>Load <cite>ledgers/YYYY/transfers.ledger</cite> in editor for transfers between accounts.</li>
<li>Enter SublimeText 2-column mode with <cite>cmd-alt-2</cite>.  Put the inbox on the right and everything else on the left.</li>
<li>Open the interactive register with <cite>make ui</cite> so that all accounts can be viewed and historical transactions can be explored.</li>
</ol>
</div>
<div class="section" id="download-monthly-transactions">
<h2>Download Monthly Transactions<a class="headerlink" href="#download-monthly-transactions" title="Permalink to this headline">¶</a></h2>
<p>The goal of downloading transactions is to download a <cite>.QFX</cite> file for each account containing one month of that account’s transactions.
These files will eventually be imported into the ledger with the sync process.</p>
<p>Throughout the download process, accounts are referred to by the last 4 or 5 digits of their account number.
When an account is downloaded, the file will be renamed using the 4 or 5 digit number.</p>
<div class="section" id="unique-portfolios">
<h3>Unique portfolios<a class="headerlink" href="#unique-portfolios" title="Permalink to this headline">¶</a></h3>
<p>Each bank or financial institution has a unique process for downloading transactions.
To make this process as repeatable as possible, it is recommended to use account management software to store web URLs and authentication information for logging into your various bank web portals.
Since each accounting portfolio is different, <span class="xref std std-doc">downloading.md</span> is described in a separate document that will be different for each project.</p>
</div>
<div class="section" id="moving-downloads-to-ledger-project">
<h3>Moving downloads to ledger project<a class="headerlink" href="#moving-downloads-to-ledger-project" title="Permalink to this headline">¶</a></h3>
<p>Once the <cite>.QFX</cite> files have been downloaded and renamed, they must be moved to the ledger project so they can be archived.
Create a folder called <cite>data/YYYY/MM</cite> in the project, where <strong>YYYY</strong> is the year and <strong>MM</strong> is the month.
Move all the downloaded <cite>.QFX</cite> files into this new folder and check it into the repository.</p>
</div>
<div class="section" id="download-statements">
<h3>Download Statements<a class="headerlink" href="#download-statements" title="Permalink to this headline">¶</a></h3>
<p>Each financial institution produces periodic statements that memorialize your account balances.
These statements need to be downloaded or scanned so they can be compared to the ledger balance, later.
The most convenient time to download these statements is when downloading transaction data.
As with transaction data, the process for downloading statements is unique to each bank so <span class="xref std std-doc">downloading.md</span> is in a separate document as well.</p>
</div>
<div class="section" id="downloading-is-complete">
<h3>Downloading is complete<a class="headerlink" href="#downloading-is-complete" title="Permalink to this headline">¶</a></h3>
<p>Once the <cite>.QFX</cite> and <cite>.PDF</cite> files are in the repository, the ledger project contains an archive of the bank’s record of your account transactions.
These archived <cite>.QFX</cite> and <cite>.PDF</cite> files are unlikely to change and, since they are computer-readable, they are a convenient source of raw transaction data for updating our ledgers.</p>
</div>
</div>
<div class="section" id="sync-transactions-to-inbox">
<h2>Sync transactions to Inbox<a class="headerlink" href="#sync-transactions-to-inbox" title="Permalink to this headline">¶</a></h2>
<p>After downloading, transactions need to be synced to <cite>ledgers/inbox.ledger</cite> according to the configuration specified by [etc/syncrc](../etc/syncrc).
The sync process expects to find <cite>.QFX</cite> files for import in within the ledger project itself, inside the <cite>data/</cite> folder.
To perform the sync, use <cite>bin/sync.sh</cite>, substituting the year and month as appropriate:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">/</span><span class="n">sync</span><span class="o">.</span><span class="n">sh</span> <span class="n">etc</span><span class="o">/</span><span class="n">syncrc</span> <span class="n">YYYY</span> <span class="n">MM</span>
</pre></div>
</div>
<p>As accounts are synced to the inbox, <cite>sync.sh</cite> adds a comment to the file to provide notice that a new account is being synced.
Watch for these comments during import so you know when to switch ledger files.
The <cite>ofxid</cite> that appears as a comment in each transaction must remain intact for re-running <cite>sync.sh</cite> to be possible.</p>
</div>
<div class="section" id="the-configuration-file-syncrc">
<h2>The configuration file <cite>syncrc</cite><a class="headerlink" href="#the-configuration-file-syncrc" title="Permalink to this headline">¶</a></h2>
<p>The configuration file describes all of the accounts that should be imported by <cite>sync.sh</cite>.
Each row in the configuration is one account and it has three fields:</p>
<ul class="simple">
<li>financial ID</li>
<li>4 or 5-digit account ID</li>
<li>account name to import into ledger as.</li>
</ul>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">1234</span> <span class="n">Assets</span><span class="p">:</span><span class="n">BankOne</span><span class="p">:</span><span class="n">Checking</span>
<span class="mi">1</span> <span class="mi">2345</span> <span class="n">Assets</span><span class="p">:</span><span class="n">BankOne</span><span class="p">:</span><span class="n">Savings</span>
<span class="mi">2</span> <span class="mi">3456</span> <span class="n">Assets</span><span class="p">:</span><span class="n">BankTwo</span><span class="p">:</span><span class="n">Savings</span>
</pre></div>
</div>
<p>The financial ID is a number that chosen by you, but it should be unique and consistent within your ledgers.
The account ID and account name should match your portfolio.</p>
</div>
<div class="section" id="process-inbox">
<h2>Process Inbox<a class="headerlink" href="#process-inbox" title="Permalink to this headline">¶</a></h2>
<p>Once transactions have been synced to <cite>inbox.ledger</cite>, it is time to process the inbox.
The user imports transactions by cut-and-pasting them from the <cite>inbox</cite> into the destination ledger.
The destination ledger is opened in the text editor depending on the account is indicated by the <cite>sync.sh</cite> comments.
When the inbox is empty because all the transactions were pasted, this process is done.</p>
<p>The primary goals for processing the inbox are: 1) ensure the categories of the transactions have been set correctly; and 2) migrate those transactions into the proper ledger.
The category can usually be determined from the memo and the date, which should enable you to remember the transaction or find a receipt that can establish the category.
There is a separate review step called “clearing” in which transactions are more closely examined to figure out if they are accurate or not.</p>
</div>
<div class="section" id="rules-for-processing">
<h2>Rules for processing<a class="headerlink" href="#rules-for-processing" title="Permalink to this headline">¶</a></h2>
<p>There are a few things to watch for while processing.</p>
<ul class="simple">
<li>If the transaction is a transfer between your own ledger accounts, then move this transaction to <cite>transfers.ledger</cite>.  Some banks provide a generic memo for transfers between internal accounts, so it may be necessary to investigate transactions online.</li>
<li>If the category is incorrect, edit the transaction before moving it from <cite>inbox.ledger</cite>.  Changing a category and re-running the import can automatically apply that change to remaining transactions in the inbox.</li>
<li>To see what categories are available, run <cite>make ui</cite> in order to interactively explore the categories in the ledger.</li>
<li>If the transaction represents a split transaction, then add lines to the transaction before cut-and-pasting it from <cite>inbox.ledger</cite>.</li>
<li>If a transaction looks proper, and especially if the booked amount matches a receipt, then the transaction can be immediately marked as “cleared”.  Uncleared transactions can be investigated later with a special report, after importing is completed.</li>
<li>When cut-and-pasting, move one or more transaction from the top of the inbox to the bottom of the account ledger you’re importing to.</li>
</ul>
</div>
<div class="section" id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>Next read about <a class="reference internal" href="clearing.html"><span class="doc">Clearing Transactions</span></a> and balances need to match their counterparts as calculated by the bank.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">diamond-accounting</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Updating accounts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">diamond-accounting</a></li>
      <li>Next: <a href="../installation.html" title="next chapter">installation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016 Ian Dennis Miller.
      
      |
      <a href="../_sources/process/updating-accounts.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>